{% extends 'base.html' %}
{% block title %}Mark Attendance - ASWATHAMA CLASSES{% endblock %}
{% block content %}
<section class="admin-section">
    <div class="container">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
            <h1>Batch Attendance</h1>
            <a href="{{ url_for('teacher_dashboard') }}" class="btn btn-outline">Back to Dashboard</a>
        </div>

        <form action="{{ url_for('teacher_attendance') }}" method="POST">
            <div class="admin-card" style="padding:20px; border:1px solid #000; margin-bottom:20px;">
                <label style="font-weight:bold;">Date:</label>
                <input type="date" name="date" value="{{ today }}" required style="padding:10px; margin-left:10px; border:1px solid #000;">
            </div>

            <div class="attendance-table-wrapper">
                <table style="width:100%; border-collapse:collapse; background:white; border:1px solid #000;">
                    <thead style="background:#000; color:white;">
                        <tr>
                            <th style="padding:15px; text-align:left;">Student Name</th>
                            <th style="padding:15px; text-align:left;">Class</th>
                            <th style="padding:15px; text-align:center;">Mark Absent</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for student in students %}
                        <tr style="border-bottom:1px solid #eee;">
                            <td style="padding:15px;">{{ student.name }} ({{ student.id }})</td>
                            <td style="padding:15px;">{{ student.class or student.student_class }}</td>
                            <td style="padding:15px; text-align:center;">
                                <input type="checkbox" name="absent_students" value="{{ student.id }}" style="width:20px; height:20px;">
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div style="margin-top:30px; display:flex; gap:10px;">
                <button type="submit" class="btn btn-primary" style="flex-grow:1; padding:20px;">Submit Attendance (All others will be marked Present)</button>
            </div>
        </form>
    </div>
</section>

<style>
.attendance-table-wrapper {
    max-height: 600px;
    overflow-y: auto;
    border: 1px solid #000;
}
.attendance-table-wrapper table {
    position: relative;
}
.attendance-table-wrapper thead th {
    position: sticky;
    top: 0;
    z-index: 10;
}
</style>
{% endblock %}
