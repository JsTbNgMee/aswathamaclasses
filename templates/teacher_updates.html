{% extends 'base.html' %}
{% block title %}Manage Updates - ASHWATHAMA CLASSES{% endblock %}
{% block content %}
<section class="admin-section">
    <div class="container">
        <div class="dashboard-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:40px;">
            <h1>Manage Website Updates</h1>
            <a href="{{ url_for('teacher_dashboard') }}" class="btn btn-outline" style="padding:10px 20px;">Back to Dashboard</a>
        </div>

        <div class="admin-card" style="background:#f9f9f9; padding:30px; border:1px solid #ddd; margin-bottom:40px;">
            <h3>Post New Update</h3>
            <form action="{{ url_for('teacher_updates') }}" method="POST" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:20px; margin-top:20px;">
                <input type="text" name="title" placeholder="Update Title" required style="padding:12px; border:1px solid #ddd;">
                <select name="type" required style="padding:12px; border:1px solid #ddd;">
                    <option value="NOTICE">Notice (Gray)</option>
                    <option value="IMPORTANT">Important (Red)</option>
                    <option value="NEW">New (Green)</option>
                    <option value="VIDEO">Video (Blue)</option>
                </select>
                <input type="date" name="start_date" required style="padding:12px; border:1px solid #ddd;" value="{{ today }}">
                <input type="date" name="end_date" required style="padding:12px; border:1px solid #ddd;">
                <input type="number" name="priority" placeholder="Priority (1-10)" required style="padding:12px; border:1px solid #ddd;">
                <input type="text" name="link" placeholder="Link URL (Optional)" style="padding:12px; border:1px solid #ddd; grid-column: span 2;">
                <textarea name="description" placeholder="Short description..." required style="padding:12px; border:1px solid #ddd; grid-column: span 3; min-height:100px;"></textarea>
                <button type="submit" class="btn btn-primary" style="grid-column: span 3;">Post Update</button>
            </form>
        </div>

        <h3>Active & Future Updates</h3>
        <div class="students-list" style="margin-top:20px;">
            <table style="width:100%; border-collapse:collapse; background:white; border:1px solid #ddd;">
                <thead style="background:#000; color:white;">
                    <tr>
                        <th style="padding:15px; text-align:left;">Title</th>
                        <th style="padding:15px; text-align:left;">Type</th>
                        <th style="padding:15px; text-align:left;">Dates</th>
                        <th style="padding:15px; text-align:left;">Priority</th>
                    </tr>
                </thead>
                <tbody>
                    {% for update in updates %}
                    <tr style="border-bottom:1px solid #eee;">
                        <td style="padding:15px;"><strong>{{ update.title }}</strong></td>
                        <td style="padding:15px;">{{ update.type }}</td>
                        <td style="padding:15px; font-size:12px;">{{ update.start_date }} to {{ update.end_date }}</td>
                        <td style="padding:15px;">{{ update.priority }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="4" style="padding:30px; text-align:center; opacity:0.6;">No active updates found. Check Google Sheets to see future/past updates.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <div style="margin-top:30px; padding:20px; background:#fff8e1; border:1px solid #ffe082; border-radius:8px;">
            <p><strong>Pro Tip:</strong> Updates are stored in the "Updates" tab of your Google Sheet. You can manually delete rows there to remove old updates entirely.</p>
        </div>
    </div>
</section>
{% endblock %}